# ğŸš€ ZS's Crypto Shorting Cockpit (åŠ å¯†è´§å¸ç©ºå¤´é©¾é©¶èˆ±)

![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.109+-009688.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)
![Status](https://img.shields.io/badge/Status-Stable-success.svg)

> **"Slow is Smooth, Smooth is Fast." (æ…¢å°±æ˜¯å¿«)**
>
> è¿™æ˜¯ä¸€ä¸ªä¸ºé‡åŒ–äº¤æ˜“è€…æ‰“é€ çš„ã€**ç§»åŠ¨ç«¯ä¼˜å…ˆ**çš„ä¸“ä¸šçº§åŠ å¯†è´§å¸äº¤æ˜“åˆ†æä¸å®æ—¶ç›‘æ§ç³»ç»Ÿã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªè®°è´¦å·¥å…·ï¼Œæ›´æ˜¯ä¸€ä¸ªé›†æˆäº†æœºæ„çº§é£æ§æ ‡å‡†ã€ç»©æ•ˆå½’å› åˆ†æå’Œå®æ—¶æˆ˜åœºç›‘æ§çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### ğŸ“Š 1. æ·±åº¦äº¤æ˜“åˆ†æ (Analytics Dashboard)
è¶…è¶Šäº¤æ˜“æ‰€è‡ªå¸¦çš„åŸºç¡€æŠ¥è¡¨ï¼Œæä¾›æ ¸å¿ƒé‡åŒ–æŒ‡æ ‡ï¼š
- **æœºæ„çº§ç»©æ•ˆè¯„ä¼°**: è‡ªåŠ¨è®¡ç®— **å¤æ™®æ¯”ç‡ (Sharpe)**ã€**å¡ç›æ¯”ç‡ (Calmar)**ã€**ç´¢æè¯ºæ¯”ç‡ (Sortino)** å’Œ **ç³»ç»Ÿè´¨é‡æ•° (SQN)**ã€‚
- **èµ„é‡‘ç®¡ç†è¾…åŠ©**: å†…ç½® **å‡¯åˆ©å…¬å¼ (Kelly Criterion)** å»ºè®®ï¼ŒåŸºäºå†å²èƒœèµ”ç‡åŠ¨æ€æ¨èæœ€ä½³ä»“ä½æ¯”ä¾‹ã€‚
- **å¯è§†åŒ–æŠ¥è¡¨**:
  - **æƒç›Šæ›²çº¿**: ç²¾ç¡®çš„ç´¯è®¡å‡€å€¼èµ°åŠ¿ï¼ˆå·²å‰”é™¤å……æå¸å½±å“ï¼‰ã€‚
  - **ç›ˆäºåˆ†å¸ƒ**: æ•£ç‚¹å›¾åˆ†ææŒä»“æ—¶é—´ä¸ç›ˆäºçš„å…³ç³»ï¼ˆDuration Analysisï¼‰ã€‚
  - **æ—¶æ®µåˆ†æ**: 24å°æ—¶ç›ˆäºçƒ­åŠ›å›¾ï¼Œè¯†åˆ«æœ€ä½³äº¤æ˜“æ—¶æ®µã€‚
  - **çº¢é»‘æ¦œ**: è‡ªåŠ¨ç»Ÿè®¡å„å¸ç§çš„èƒœç‡ä¸è´¡çŒ®åº¦ã€‚

### ğŸ“± 2. å®æ—¶æˆ˜åœºç›‘æ§ (Live Monitor)
ä¸“ä¸ºå¤šå±ååŒå’Œç§»åŠ¨åŠå…¬è®¾è®¡çš„å®æ—¶ç›‘æ§å°ï¼š
- **ç§’çº§åŒæ­¥**: å¹¶è¡Œæ•°æ®åŠ è½½æ¶æ„ï¼Œç¡®ä¿ä»·æ ¼ã€æŒä»“å’Œè´¦æˆ·ä½™é¢æ¯«ç§’çº§åˆ·æ–°ã€‚
- **ç§»åŠ¨ç«¯é€‚é…**: ç‹¬åˆ›çš„ **"Card View" (å¡ç‰‡è§†å›¾)**ï¼Œåœ¨æ‰‹æœºç«¯è‡ªåŠ¨å°†å®½è¡¨æ ¼è½¬æ¢ä¸ºå¡ç‰‡ï¼Œå…³é”®ä¿¡æ¯ï¼ˆuPnL, ROI, æŒä»“æ—¶é•¿ï¼‰ä¸€ç›®äº†ç„¶ã€‚
- **å…¨æ™¯é£é™©è§†å›¾**: å®æ—¶è®¡ç®— **çœŸå®æ æ†ç‡ (Real Leverage)**ã€**é£é™©æ•å£ (Exposure)** å’Œ **æœªç»“ç›ˆäº**ã€‚

### ğŸ›¡ï¸ 3. æ™ºèƒ½é£æ§åè®® (Risk Protocols)
ç³»ç»Ÿå†…ç½®è‡ªåŠ¨åŒ–é£æ§è§„åˆ™ï¼Œæ—¶åˆ»ç›‘æ§è´¦æˆ·å¥åº·ï¼š
- **å›æ’¤ç†”æ–­**: å®æ—¶ç›‘æ§å½“å‰å›æ’¤ (Drawdown)ï¼Œé…åˆè´¦æˆ·å¥åº·åº¦è¯„åˆ†ç³»ç»Ÿ (Health Score)ã€‚
- **åƒµå°¸ä»“ä½é¢„è­¦**: è‡ªåŠ¨æ ‡è®°æŒä»“è¶…è¿‡ **48å°æ—¶** çš„çŸ­çº¿è®¢å• (Stale Position)ã€‚
- **è¿‡å¤œé£é™©æç¤º**: ç›‘æ§æ¯æ—¥ 23:00 åçš„æŒä»“ç¬¦å·æ•°é‡ï¼Œé˜²æ­¢è¿‡åº¦åˆ†æ•£ã€‚
- **è¿è´¥ä¿æŠ¤**: ç›‘æ§è¿‘æœŸè¿ç»­äºæŸç¬”æ•°ï¼Œè§¦å‘â€œç†”æ–­â€å»ºè®®ã€‚

### âš¡ 4. æè‡´æ€§èƒ½ä¸ä½“éªŒ
- **éª¨æ¶å±åŠ è½½ (Skeleton UI)**: æ‹’ç»ç™½å±å’Œè·³åŠ¨ï¼Œæä¾›åŸç”Ÿ App èˆ¬çš„æµç•…åŠ è½½ä½“éªŒã€‚
- **æš—é»‘æ¨¡å¼ (Dark Mode)**: æ·±åº¦é€‚é…çš„ OLED é»‘å¤œæ¨¡å¼ï¼Œä¸ä»…æŠ¤çœ¼ï¼Œæ›´æ˜¯äº¤æ˜“å‘˜çš„ä¿¡ä»°ã€‚
- **æœ¬åœ°åŒ–æ¶æ„**: æ ¸å¿ƒæ•°æ®å­˜å‚¨äºæœ¬åœ° SQLiteï¼Œä¸ä¾èµ–ç¬¬ä¸‰æ–¹äº‘æœåŠ¡ï¼Œæ•°æ®ç»å¯¹ç§æœ‰å®‰å…¨ã€‚

---

## ğŸ› ï¸ ç³»ç»Ÿæ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨ **å‰åç«¯åˆ†ç¦»** çš„è®¾è®¡æ€æƒ³ï¼ŒåŸºäº Python ç”Ÿæ€æ„å»ºï¼š

```mermaid
graph TD
    User[ç”¨æˆ· (PC/Mobile)] -->|HTTP/WebSocket| Nginx[Nginx / Uvicorn]
    Nginx --> FastAPI[FastAPI åç«¯]

    subgraph "Core System"
        FastAPI -->|Query| SQLite[(SQLite æ•°æ®åº“)]
        Scheduler[APScheduler å®šæ—¶ä»»åŠ¡] -->|Write| SQLite
        Scheduler -->|REST API| Binance[Binance Exchange]
    end

    subgraph "Frontend"
        HTML[Jinja2 Templates]
        JS[Vanilla JS + ApexCharts]
        CSS[TailwindCSS]
    end
```

- **åç«¯**: FastAPI (é«˜æ€§èƒ½å¼‚æ­¥æ¡†æ¶) + APScheduler (åå°è°ƒåº¦)
- **æ•°æ®å±‚**: Pandas (æ¸…æ´—è®¡ç®—) + SQLite (æŒä¹…åŒ–å­˜å‚¨)
- **å‰ç«¯**: åŸç”Ÿ JavaScript (æ— æ¡†æ¶ä¾èµ–) + Tailwind CSS + ApexCharts.js

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.10+
- èƒ½å¤Ÿè®¿é—®å¸å®‰ API çš„ç½‘ç»œç¯å¢ƒ (å»ºè®®ä½¿ç”¨é¦™æ¸¯/æ—¥æœ¬èŠ‚ç‚¹)

### 1. å®‰è£…
```bash
# å…‹éš†ä»“åº“
git clone <repository_url>
cd crypto_dashboard

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. é…ç½®
å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶å¡«å…¥æ‚¨çš„ API Keyï¼š
```bash
touch .env
```

åœ¨ `.env` æ–‡ä»¶ä¸­å¡«å…¥ï¼š
```ini
# å¸å®‰ API å‡­è¯ (å¿…é¡»)
BINANCE_API_KEY=your_api_key_here
BINANCE_API_SECRET=your_api_secret_here

# ç³»ç»Ÿé…ç½® (å¯é€‰)
# äº¤æ˜“åŒæ­¥é—´éš” (åˆ†é’Ÿ), å»ºè®®è®¾ä¸º 1 ä»¥è·å¾—æœ€ä½³å®æ—¶æ€§
UPDATE_INTERVAL_MINUTES=1
# åŒæ­¥å›æº¯å¤©æ•°
DAYS_TO_FETCH=90
```

### 3. è¿è¡Œ
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```
è®¿é—® `http://localhost:8000` å³å¯çœ‹åˆ°ä»ªè¡¨ç›˜ã€‚

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
crypto_dashboard/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py            # FastAPI å…¥å£ä¸è·¯ç”±
â”‚   â”œâ”€â”€ scheduler.py       # åå°æ•°æ®åŒæ­¥è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ services.py        # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ models.py          # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ database.py        # æ•°æ®åº“è¿æ¥ç®¡ç†
â”œâ”€â”€ data/
â”‚   â””â”€â”€ trades.db          # SQLite æ•°æ®åº“æ–‡ä»¶ (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ templates/             # å‰ç«¯é¡µé¢
â”‚   â”œâ”€â”€ index.html         # ä¸»ä»ªè¡¨ç›˜ (Dashboard)
â”‚   â”œâ”€â”€ live_monitor.html  # å®æ—¶ç›‘æ§ (Monitor)
â”‚   â”œâ”€â”€ logs.html          # ç³»ç»Ÿæ—¥å¿—
â”‚   â””â”€â”€ metrics.html       # æŒ‡æ ‡è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ static/                # é™æ€èµ„æº (CSS/JS)
â”œâ”€â”€ requirements.txt       # é¡¹ç›®ä¾èµ–
â””â”€â”€ trade_analyzer.py      # (Legacy) ç‹¬ç«‹åˆ†æè„šæœ¬
```

---

## âš ï¸ å…è´£å£°æ˜

æœ¬è½¯ä»¶ä»…ä¾›**æ•™è‚²å’Œç ”ç©¶ç›®çš„**ä½¿ç”¨ã€‚
- åŠ å¯†è´§å¸äº¤æ˜“å…·æœ‰æé«˜é£é™©ï¼Œå¯èƒ½å¯¼è‡´èµ„é‡‘å…¨é¢æŸå¤±ã€‚
- å¼€å‘è€…ä¸å¯¹å› è½¯ä»¶é”™è¯¯ã€APIæ•…éšœæˆ–ç½‘ç»œå»¶è¿Ÿå¯¼è‡´çš„ä»»ä½•èµ„é‡‘æŸå¤±è´Ÿè´£ã€‚
- è¯·åŠ¡å¿…åœ¨å®ç›˜ä½¿ç”¨å‰å……åˆ†æµ‹è¯•ã€‚

---

## ğŸ“„ License

MIT License
